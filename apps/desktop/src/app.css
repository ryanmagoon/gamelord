@import "tailwindcss";
@import "@gamelord/ui/theme.css";
@import "@gamelord/ui/vibes/unc.css";

/*
 * Geist Pixel — a bitmap-inspired display typeface from Vercel.
 * We load all five variants so they can be mixed for different UI contexts.
 * "Square" is the default body font; others are available via font-family.
 */
@font-face {
  font-family: 'Geist Pixel Square';
  src: url('./assets/fonts/geist-pixel/GeistPixel-Square.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Pixel Grid';
  src: url('./assets/fonts/geist-pixel/GeistPixel-Grid.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Pixel Circle';
  src: url('./assets/fonts/geist-pixel/GeistPixel-Circle.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Pixel Triangle';
  src: url('./assets/fonts/geist-pixel/GeistPixel-Triangle.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Geist Pixel Line';
  src: url('./assets/fonts/geist-pixel/GeistPixel-Line.woff2') format('woff2');
  font-weight: 500;
  font-style: normal;
  font-display: swap;
}

/* Override the system font stack from theme.css with Geist Pixel Square. */
body {
  font-family: 'Geist Pixel Square', ui-monospace, SFMono-Regular, Menlo, Monaco, monospace;
}

/* Scan local renderer components */
@source "./renderer/**/*.{js,ts,jsx,tsx}";
/* Scan UI package components (from src/, go up 3 levels to monorepo root) */
@source "../../../packages/ui/components/**/*.{js,ts,jsx,tsx}";
@source "../../../packages/ui/utils.ts";

/* Window drag region utilities */
@utility drag-region {
  -webkit-app-region: drag;
  -webkit-user-select: none;
  user-select: none;
}

@utility no-drag {
  -webkit-app-region: no-drag;
}

/* Padding for macOS traffic lights */
@utility titlebar-inset {
  padding-left: 72px;
}

/**
 * Temporarily applied to <body> during theme switches so background, text,
 * and border colors cross-fade instead of snapping.
 */
.theme-transitioning,
.theme-transitioning * {
  transition: background-color 200ms ease, color 200ms ease, border-color 200ms ease !important;
}

/* Staggered game-card entrance animation */
@keyframes card-enter {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-card-enter {
  animation: card-enter 350ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

/* Card exit animation for FLIP transitions */
@keyframes card-exit {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.92);
  }
}

.animate-card-exit {
  animation: card-exit 200ms cubic-bezier(0.4, 0, 1, 1) both;
  pointer-events: none;
}

/*
 * Dialog overlay fade — smooth backdrop transition that gives the eye
 * time to register the dimming before the content appears.
 * Registered as @utility so Tailwind v4 can generate data-[state] variants.
 */
@keyframes overlay-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes overlay-fade-out {
  from { opacity: 1; }
  to { opacity: 0; }
}

@utility animate-overlay-fade-in {
  animation: overlay-fade-in 250ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

@utility animate-overlay-fade-out {
  animation: overlay-fade-out 180ms cubic-bezier(0.4, 0, 1, 1) both;
}

/*
 * CRT-inspired dialog scan-in / scan-out animations.
 * The content materialises from a thin horizontal line that expands
 * vertically. Uses the modern `scale` property (separate from `transform`)
 * so it doesn't conflict with Tailwind's `translate` centering.
 * Only `opacity` and `scale` are animated — both are GPU-composited,
 * so no repaints are triggered per frame.
 * Registered as @utility so Tailwind v4 can generate data-[state] variants.
 */
@keyframes dialog-scan-in {
  0% {
    opacity: 0;
    scale: 0.85 0.01;
  }
  40% {
    opacity: 1;
    scale: 1 0.04;
  }
  100% {
    opacity: 1;
    scale: 1 1;
  }
}

@keyframes dialog-scan-out {
  0% {
    opacity: 1;
    scale: 1 1;
  }
  60% {
    opacity: 1;
    scale: 1 0.04;
  }
  100% {
    opacity: 0;
    scale: 0.85 0.01;
  }
}

/* Apply to AlertDialogContent via the data-[state] attributes.
 * The 120ms delay lets the overlay fade settle before the content scans in. */
@utility animate-dialog-scan-in {
  animation: dialog-scan-in 250ms cubic-bezier(0.16, 1, 0.3, 1) 120ms both;
}

@utility animate-dialog-scan-out {
  animation: dialog-scan-out 200ms cubic-bezier(0.7, 0, 0.84, 0) both;
}

/* Artwork dissolve-in: fade + subtle scale-down settle */
@keyframes artwork-dissolve-in {
  from {
    opacity: 0;
    transform: scale(1.03);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-artwork-dissolve-in {
  animation: artwork-dissolve-in 500ms cubic-bezier(0.16, 1, 0.3, 1) forwards;
}

/* Breathing pulse on game cards during artwork sync (replaces text status labels).
 * Pattern: normal → bright → normal → dim → normal, starting at the idle
 * brightness so there's no jarring jump when the animation kicks in. */
@keyframes card-sync-pulse {
  0%, 100% {
    filter: brightness(1);
  }
  25% {
    filter: brightness(1.25);
  }
  50% {
    filter: brightness(1);
  }
  75% {
    filter: brightness(0.5);
  }
}

.animate-card-sync-pulse {
  animation: card-sync-pulse 1.0s ease-in-out infinite;
}

/* Fade-in for the "Artwork not found" label on cards. */
@keyframes not-found-fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

.animate-not-found-fade-in {
  animation: not-found-fade-in 500ms ease-out both;
}

/* Shimmer sweep on game cards during launch. A diagonal highlight band
 * slides across the card to indicate the game is loading. */
@keyframes card-launch-shimmer {
  0% {
    transform: translateX(-100%) skewX(-15deg);
  }
  100% {
    transform: translateX(200%) skewX(-15deg);
  }
}

.animate-card-launch-shimmer {
  animation: card-launch-shimmer 1.2s ease-in-out infinite;
}

/* Favorite heart pop — satisfying scale bounce on toggle */
@keyframes favorite-pop {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.35);
  }
  100% {
    transform: scale(1);
  }
}

.animate-favorite-pop {
  animation: favorite-pop 250ms cubic-bezier(0.16, 1, 0.3, 1);
}

/* Scroll letter indicator — CRT phosphor glow in dark mode */
.dark .scroll-letter-indicator {
  text-shadow: 0 0 40px rgba(120, 200, 255, 0.6), 0 0 100px rgba(120, 200, 255, 0.3);
}